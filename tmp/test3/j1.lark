// Ignore whitespace
%import common.WS
%ignore WS

// Define what a comment looks like and ignore it
COMMENT: ";" /[^\n]*/
%ignore COMMENT

// Define what a number looks like - treat entire number as one token
HEX: /#\$[0-9a-fA-F]+/
DECIMAL: /#[0-9]+/

// Define what an identifier looks like (for labels)
IDENT: /[a-zA-Z][a-zA-Z0-9_]*/

// Define instructions (terminals)
LIT: "LIT"
ADD: "+"
RET: "RET"
CALL: "CALL"
JMP: "JMP"

// Define the structure of our program (rules)
?start: program
program: statement*
statement: (label | instruction)

// Label rules
labelref: IDENT
label: IDENT ":"

// Instruction rules
instruction: LIT (HEX | DECIMAL)
          | ADD
          | RET
          | CALL labelref
          | JMP labelref